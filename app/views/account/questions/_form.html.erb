<%= simple_form_for [:account,@question] do |f| %>
  <%#= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :title,label:"问题主题" %>
    <%= f.input :description,label:"问题说明",placeholder:"问题说明"%>

    <label class="float required control-label" for="question_tag_list"><abbr title="required">*</abbr> 问题标签</label>
    <%= select_tag 'question[tag_list][]', options_for_select(@tags.collect{ |t| [t.name, t.name] }),multiple: true, class: 'ui fluid search dropdown' %>

    <%= f.input :downpayment,label:"悬赏金额（元）", input_html: { min: '0', step: 'any' }%>
    <%= render "multiple_dropdown_bar" %>

  </div>

  <div class="form-actions">
    <%= f.button :submit,value:"提交问题" %>
  </div>
<% end %>

<script type="text/javascript">
var editor = new Simditor({
 textarea: $("#question_description"),
 toolbar: ['title', 'bold', 'italic', 'underline', 'strikethrough', 'color', '|', 'ol', 'ul', 'blockquote', 'code', 'table', 'link', '|','hr','indent','outdent','alignment'],
 placeholder: '想问的问题...',
 upload: {
   fileKey: 'file',
   params: null,
   connectionCount: 3,
   leaveConfirm: 'Uploading is in progress, are you sure to leave this page?'
 }
});
editor.value();

var data = '<%= @question.tags.to_json.to_s.html_safe %>';
data = $.parseJSON(data)

var array = new Array();
$.each(data, function(index, tag) {
  var name = tag.name;
  array[index] = name;
});

$('.ui.fluid.dropdown').dropdown('set selected',array);
$('.ui.dropdown').dropdown({
  allowAdditions: false
});
</script>
